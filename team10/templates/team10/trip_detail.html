{% extends "team10/base.html" %}
{% block title %}جزئیات سفر | ایران‌نما{% endblock %}

{% block content %}
<section class="t10-page">
  <section class="t10-section">
    <h2>جزئیات سفر</h2>
    <p>نمایش اطلاعات کلی و برنامه روزانه سفر.</p>
  </section>

        <div class="trip-details-card">
            <div class="trip-info-grid">
                <div class="info-item">
                    <span class="label">مزدا</span>
                    <span class="value">{{ trip.destination_name }}</span>
                </div>
                <div class="info-item">
                    <span class="label">مبدأ</span>
                    <span class="value">{{ trip.origin_name|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="label">مدت</span>
                    <span class="value">{{ trip.days }} روز</span>
                </div>
                <div class="info-item">
                    <span class="label">تاریخ شروع</span>
                    <span class="value">{{ trip.start_at|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="label">قالب</span>
                    <span class="value">{{ trip.get_status_display }}</span>
                </div>
                <div class="info-item">
                    <span class="label">تعداد نفر</span>
                    <span class="value">{{ trip.people }}</span>
                </div>
                <div class="info-item">
                    <span class="label">سطح بودجه</span>
                    <span clascompelates="value">{{ trip.requirements.get_budget_level_display|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="label">هزینه کل</span>
                    <span class="value">{{ trip.total_cost|default:"—" }}</span>
                </div>
            </div>
        </div>

  <section class="t10-card">
    <h3>برنامه روزانه</h3>

    {% for plan in daily_plans %}
    <div class="t10-day-block">
      <h4>روز {{ forloop.counter }}</h4>
      <div class="t10-item-row">
        <div><strong>نام:</strong> {{ plan.description|truncatechars:40|default:"-" }}</div>
        <div><strong>نوع:</strong>
          {% if plan.activity_type == "SIGHTSEEING" %}گردشگری
          {% elif plan.activity_type == "FOOD" %}غذا
          {% elif plan.activity_type == "SHOPPING" %}خرید
          {% elif plan.activity_type == "OUTDOOR" %}فضای باز
          {% elif plan.activity_type == "CULTURE" %}فرهنگی
          {% elif plan.activity_type == "RELAX" %}استراحت
          {% elif plan.activity_type == "NIGHTLIFE" %}شب‌گردی
          {% elif plan.activity_type == "TRANSPORT" %}حمل‌ونقل
          {% else %}سایر
          {% endif %}
        </div>
        <div><strong>ساعت پیشنهادی:</strong> {{ plan.start_at|date:"H:i"|default:"-" }}</div>
        <div><strong>توضیح کوتاه:</strong> {{ plan.description|default:"-" }}</div>
      </div>
      <div class="t10-transfer">
        بازه زمانی: {{ plan.start_at|date:"Y-m-d H:i"|default:"-" }} تا {{ plan.end_at|date:"Y-m-d H:i"|default:"-" }}
      </div>
    </div>
    {% empty %}
    <div class="t10-day-block">
      <div class="t10-item-row">
        <div>برنامه‌ای برای این سفر ثبت نشده است.</div>
      </div>
    </div>
    {% endfor %}
  </section>

  <section class="t10-card">
    <h3>هتل‌ها</h3>
    {% for hotel in hotel_schedules %}
    <div class="t10-day-block">
      <div class="t10-item-row">
        <div><strong>شناسه هتل:</strong> {{ hotel.hotel_id }}</div>
        <div><strong>تعداد اتاق:</strong> {{ hotel.rooms_count }}</div>
        <div><strong>هزینه:</strong> {{ hotel.cost }}</div>
      </div>
      <div class="t10-transfer">
        بازه اقامت: {{ hotel.start_at|date:"Y-m-d H:i"|default:"-" }} تا {{ hotel.end_at|date:"Y-m-d H:i"|default:"-" }}
      </div>
    </div>
    {% empty %}
    <div class="t10-day-block">
      <div class="t10-item-row">
        <div>هتلی برای این سفر ثبت نشده است.</div>
      </div>
    </div>
    {% endfor %}
  </section>

  <div class="t10-actions">
    <a class="t10-btn t10-btn--secondary" href="/team10/trips/{{ trip.id }}/cost/">هزینه سفر</a>
    <a class="t10-btn t10-btn--secondary" href="/team10/trips/{{ trip.id }}/styles/">سبک‌ها</a>
    <a class="t10-btn t10-btn--primary" href="/team10/trips/{{ trip.id }}/replan/">بازتولید برنامه</a>
  </div>
  {% else %}
  <section class="t10-card">
    <h3>جزئیات سفر</h3>
    <p>سفر موردنظر پیدا نشد.</p>
  </section>
  {% endif %}
</section>
{% endblock %}
